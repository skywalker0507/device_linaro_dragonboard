{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "068c24e7_9cc2b531",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1890913
      },
      "writtenOn": "2022-03-28T14:46:39Z",
      "side": 1,
      "message": "Tested on db845c, haven\u0027t validated the case where the sound card isn\u0027t the default (e.g. a usb sound card probes first). Needs testing on rb5",
      "revId": "4c06cf1302345ac7717cdf78325d28a104ea2e74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0bd0c5f5_dea2bb5f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1890913
      },
      "writtenOn": "2022-03-28T17:59:40Z",
      "side": 1,
      "message": "This change depends on the mixer_paths parser change here: https://android-review.googlesource.com/c/platform/system/media/+/2036767",
      "revId": "4c06cf1302345ac7717cdf78325d28a104ea2e74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5fb9352_53ccb96c",
        "filename": "etc/audio_policy_configuration.xml",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2022-04-18T20:51:36Z",
      "side": 1,
      "message": "Are you sure there is always something attached to the HDMI output? \u0027attachedDevices\u0027 is meant for devices that can always be used for audio output or input.",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 33
      },
      "revId": "4c06cf1302345ac7717cdf78325d28a104ea2e74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef9dfc7d_a29c6fcf",
        "filename": "etc/audio_policy_configuration.xml",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1890913
      },
      "writtenOn": "2022-04-20T14:23:15Z",
      "side": 1,
      "message": "Ah I hadn\u0027t considered that, I\u0027m not sure how this would work in a headless configuration. Is it ok to drop HDMI from AttachedDevices but still have it be the top options (default?) in \u003cdevicePorts\u003e?",
      "parentUuid": "c5fb9352_53ccb96c",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 33
      },
      "revId": "4c06cf1302345ac7717cdf78325d28a104ea2e74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d6a3bf0_c7011f89",
        "filename": "etc/audio_policy_configuration.xml",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2022-04-20T18:04:18Z",
      "side": 1,
      "message": "Yes. You can consider \u0027Wired Headset/Headphones\u0027 as examples of pluggable devices.",
      "parentUuid": "ef9dfc7d_a29c6fcf",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 33
      },
      "revId": "4c06cf1302345ac7717cdf78325d28a104ea2e74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1b43a97_e9a222ba",
        "filename": "etc/audio_policy_configuration.xml",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1890913
      },
      "writtenOn": "2022-04-21T19:40:47Z",
      "side": 1,
      "message": "Hi, I\u0027ve done some testing with this, it seems like the Android audio policy configuration will always use an \"attached device\" for notification/alarm/ringtone sounds (the audio policy \"sonification\" strategy).\n\nI tried playing with custom audio policy engine strategies but I didn\u0027t seem to have much luck, I noticed there\u0027s a \"Force use for HDMI system audio\" flag, but I\u0027m not sure how to make use of it.\n\nDo you have any ideas for how to deal with this? Otherwise, given we don\u0027t actually support the \"speaker\" device here at all (before this patch series the HAL hardcoded all output to use the HDMI device) would it be reasonable to treat the HDMI output as an attached device?",
      "parentUuid": "6d6a3bf0_c7011f89",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 33
      },
      "revId": "4c06cf1302345ac7717cdf78325d28a104ea2e74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e1b5e5c_f65aaea2",
        "filename": "etc/audio_policy_configuration.xml",
        "patchSetId": 2
      },
      "lineNbr": 49,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2022-04-21T19:54:15Z",
      "side": 1,
      "message": "\u003e it seems like the Android audio policy configuration will always use an \"attached device\" for notification/alarm/ringtone sounds\n\nThat\u0027s the intention. Since the device is attached, chances are high that it will actually make a sound. Then, once an HDMI device is connected, the audio framework will receive a notification about that and change routing rules to use HDMI.\n\n\u003e I tried playing with custom audio policy engine strategies but I didn\u0027t seem to have much luck...\n\nCould you please explain what behavior you are trying to achieve? If there is no HDMI sink connected, but HDMI is listed in attached devices, sound will also not get played. I see no difference in behavior with having a fake Speaker device.",
      "parentUuid": "b1b43a97_e9a222ba",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 33
      },
      "revId": "4c06cf1302345ac7717cdf78325d28a104ea2e74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}