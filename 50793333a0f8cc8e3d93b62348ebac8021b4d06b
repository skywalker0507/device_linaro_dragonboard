{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "30121a1f_db35bb0c",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 154,
      "author": {
        "id": 1836235
      },
      "writtenOn": "2024-12-05T08:18:37Z",
      "side": 1,
      "message": "pre-existing: could we add a reminder comment here that the version of KeyMint used here is not secure, just to slightly reduce the chances of vendors copying the setup?\n\n```\n# KeyMint.  Note that this is an insecure implementation that should not be\n# used on a production device as it does not comply with [9.11/H-0-2] of the\n# Android CDD (\"Handheld device implementations MUST back up the keystore \n# implementation with an isolated execution environment\").\n```",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43fc73de_89c982bb",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 154,
      "author": {
        "id": 1041813
      },
      "writtenOn": "2024-12-05T08:39:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "30121a1f_db35bb0c",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bcac6be_6466995a",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 154,
      "author": {
        "id": 1836235
      },
      "writtenOn": "2025-01-06T07:05:46Z",
      "side": 1,
      "message": "The helpful text in patchset #2 looks to have been lost along the way -- could we re-instate?",
      "parentUuid": "43fc73de_89c982bb",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da38dfd3_2c55de70",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1836235
      },
      "writtenOn": "2024-12-05T08:18:37Z",
      "side": 1,
      "message": "Just to check: this pulls in the nonsecure version of KeyMint as an apex, rather than directly as a binary -- is that what you\u0027re after?",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2688bda5_2c566b1c",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1041813
      },
      "writtenOn": "2024-12-05T08:39:30Z",
      "side": 1,
      "message": "To be honest, I don\u0027t know the difference, just thought apex was better than binary(like the apex version includes sepolicy and manifest hal definitions, which would help to save the maintenance work in the future), but would like to have your suggestions here.",
      "parentUuid": "da38dfd3_2c55de70",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e1d42dc_0449af81",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1836235
      },
      "writtenOn": "2024-12-05T10:53:56Z",
      "side": 1,
      "message": "Sorry, I\u0027m not really familiar with the pros and cons for apexes -- maybe one of the other Google reviewers can weigh in?",
      "parentUuid": "2688bda5_2c566b1c",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95d93c69_13a6fc73",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1291337
      },
      "writtenOn": "2024-12-06T01:01:47Z",
      "side": 1,
      "message": "The APEX does contain those files through the dependency of [`com.android.hardware.keymint.rust_nonsecure`](https://cs.android.com/android/platform/superproject/main/+/main:hardware/interfaces/security/keymint/aidl/default/Android.bp;l\u003d183;drc\u003d7dcdd5b9c8ed98a3ffac4de337bb043724c1c5aa) on [`keymint_aidl_nonsecure_vintf`](https://cs.android.com/android/platform/superproject/main/+/main:hardware/interfaces/security/keymint/aidl/default/Android.bp;l\u003d215;drc\u003d7dcdd5b9c8ed98a3ffac4de337bb043724c1c5aa). However, my understanding is that adding the `cc_binary` itself ([`android.hardware.security.keymint-service`](android.hardware.security.keymint-service)) to `PRODUCT_PACKAGES` will pull those files in as well into the vendor partition through its [`vintf_fragment_modules`](https://cs.android.com/android/platform/superproject/main/+/main:hardware/interfaces/security/keymint/aidl/default/Android.bp;l\u003d67;drc\u003d7dcdd5b9c8ed98a3ffac4de337bb043724c1c5aa) dependency.\n\nThe benefits of using APEXes in this scenario are described on the [Vendor APEX documentation page](https://source.android.com/docs/core/ota/vendor-apex).",
      "parentUuid": "6e1d42dc_0449af81",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbbdffac_df46d755",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1836235
      },
      "writtenOn": "2024-12-06T07:04:27Z",
      "side": 1,
      "message": "One random thought though: are there any concerns with KeyMint coming out of an apex, given that it needs to be up at `early_hal` init stage?  (I\u0027m not sure if that\u0027s before `apexd` has done its thing.)  \n\nCody, were there any problems with boot ordering on Cuttlefish?",
      "parentUuid": "95d93c69_13a6fc73",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2761407_6f833896",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1291337
      },
      "writtenOn": "2024-12-17T20:56:39Z",
      "side": 1,
      "message": "Sorry, lost track of this change.\n\nWe had an ordering problem between keymint and gatekeeper that was fixed in aosp/3077417.\n\nThe Vendor APEX equivalent to `early_hal` is to make it a \"bootstrap\" APEX ( https://source.android.com/docs/core/ota/vendor-apex#bootstrap-vendor-apex ), which is [done for insecure keymint]( https://cs.android.com/android/platform/superproject/main/+/main:hardware/interfaces/security/keymint/aidl/default/manifest.json;l\u003d4;drc\u003d895ba8bdfacfdca906e310c45b1d7091bb31810b).\n\nIf this change replaced `android.hardware.gatekeeper@1.0-service.software` as well with the [gatekeeper APEX equivalent](https://cs.android.com/android/platform/superproject/main/+/main:hardware/interfaces/gatekeeper/aidl/software/Android.bp;l\u003d59;drc\u003d097e62533553885f64e32e2fcfd5bd89399cd70d), that would have parity with Cuttlefish which is already validated in CI.",
      "parentUuid": "dbbdffac_df46d755",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "50846415_c6c42674",
        "filename": "full.mk",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1041813
      },
      "writtenOn": "2025-01-04T03:33:26Z",
      "side": 1,
      "message": "Hi, David, I think Cody already helped answer your questions, so let me mark this as resolved, if you have other questions please feel free to let me know.",
      "parentUuid": "e2761407_6f833896",
      "revId": "50793333a0f8cc8e3d93b62348ebac8021b4d06b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}